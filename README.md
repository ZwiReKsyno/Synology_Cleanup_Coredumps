# Очистка дампов памяти Synology

### Описание

CОчистка дампов ядра памяти от сбойных процессов

Всякий раз, когда процесс аварийно завершает работу или неожиданно перезапускается, DSM создает дамп памяти, которую процесс использовал для отладки. Если вы не собираетесь выяснять причину сбоя процесса, вам не нужно их сохранять.

Если вы запланировали запуск сценария в планировщике задач с параметрами « Отправлять сведения о запуске по электронной почте» и «Отправлять сведения о запуске только при аварийном завершении сценария», планировщик задач будет отправлять вам электронное письмо всякий раз, когда сценарий удаляет файлы дампа ядра.

<p align="left">Я нашел 92 файла дампа памяти (300 МБ), датированные 2021 годом и DSM 6, в первом томе моего Synology.</p>
<p align="left"><img src="/images/syno_cleanup_coredumps.png"></p>

<p align="left">Вывод скрипта</p>
<p align="left"><img src="/images/Image-1.png"></p>

### Скачать сценарий

1. Загрузите исходный код последней версии (zip) с https://github.com/007revad/Synology_Cleanup_Coredumps/releases
2. Сохраните загруженный zip-файл в папку на Synology.
3. Разархивируйте zip-файл.

### Планирование сценария в планировщике задач Synology

См.<a href=how_to_schedule.md/>раздел «Как запланировать сценарий в Synology Task Scheduler».</a>

### Запуск скрипта через SSH

[Как включить SSH и войти в DSM через SSH](https://kb.synology.com/en-global/DSM/tutorial/How_to_login_to_DSM_with_root_permission_via_SSH_Telnet)

Вы запускаете скрипт в оболочке с помощью sudo -s или от имени пользователя root.

```YAML
sudo -s /volume1/scripts/syno_clean_coredumps.sh
```

**Примечание:** Замените /volume1/scripts/ путем к расположению сценария.

### Параметры:

В скрипте есть возможность установить возраст в днях, чтобы удалялись только дампы памяти старше этого возраста.

Вы можете использовать -a или --age, за которым следует пробел и количество дней.
```YAML
sudo -s /volume1/scripts/syno_clean_coredumps.sh -a 7
```

```YAML
sudo -s /volume1/scripts/syno_clean_coredumps.sh --age 7
```

**Примечание:** Замените /volume1/scripts/ путем к расположению сценария.
